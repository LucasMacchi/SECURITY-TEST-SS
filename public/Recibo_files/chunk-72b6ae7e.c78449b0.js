(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72b6ae7e"],{"0669":function(t,e,r){},"1e30":function(t,e,r){"use strict";var n=r("0669"),s=r.n(n);s.a},ccaa:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.notMobileLogin?r("div",{staticClass:"w-full bg-zt-white rounded-zt-md overflow-hidden",class:[t.boxLogin.styles.shadow],style:[t.boxLogin.styles.box]},[r("div",{staticClass:"flex flex-col items-center p-6"},[r("div",{staticClass:"mb-4 flex justify-center h-full",class:["full"===t.boxLogin.sizeLogo?"w-full":"w-56"]},[r("img",{staticClass:"format-img",attrs:{src:t.boxLogin.logoUrl,alt:""}})]),t.loginErrors.showMessage?r("div",{staticClass:"w-full"},[r("zt-alert",{attrs:{text:t.loginErrors.message,color:"danger",duration:t.loginErrors.MAX_DURATION_ALERT},on:{afterClosed:function(e){t.loginErrors.showMessage=!1}}})],1):t._e(),r("div",{staticClass:"mt-4 w-full"},[r("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.invalid;return[r("zt-auth-login-fields",{attrs:{"login-custom-params-fields":t.boxLogin},on:{activeButton:function(e){return t.fieldActiveButton(n)}},model:{value:t.loginFields,callback:function(e){t.loginFields=e},expression:"loginFields"}}),r("div",{staticClass:"w-full text-left text-zt-md mb-10"},[r("router-link",{staticClass:"zt-link-forgot-pass text-zt-primary-200",style:[t.boxLogin.styles.form.textColor],attrs:{to:{name:"forgotPassword"}}},[t._v(t._s(t.$t("message.loginComponent.login.forgetPassword")))])],1),r("div",{staticClass:"mb-4"},[r("zt-button",{staticClass:"zt-button-login w-full opacity-100",style:[t.bgButtonColor(n)],attrs:{disabled:n||t.isDisabledButton,"data-vs-button":"auth-login-btn-submitlogin"},on:{click:t.submitLogin}},[t.isLoadingLogin?t._e():r("span",[t._v("\n              "+t._s(t.$t("message.loginComponent.login.logintext"))+"\n            ")]),t.isLoadingLogin?r("vue-loading",{attrs:{"background-color":"rgba(0,0,0,0.0)",active:t.isLoadingLogin,color:"#4F41A3",width:30,height:30,"is-full-page":!1}}):t._e()],1)],1),t.showButtonSSO?r("div",{staticClass:"flex justify-center"},[r("zt-button",{staticClass:"zt-button-sso w-full",staticStyle:{"background-color":"#84afda"},attrs:{"data-vs-button":"auth-login-btn-gotosso"},on:{click:t.gotoSSO}},[t._v("\n            "+t._s(t.$t("message.loginComponent.sso.textButton"))+"\n          ")])],1):t._e()]}}],null,!1,2950641166)})],1)]),r("div",{staticClass:"w-full text-zt-warning lg:block"},[r("zt-auth-login-commercial-help",{attrs:{"first-login-custom-params-fields":t.boxLogin}})],1)]):r("div",{staticClass:"flex flex-col justify-center items-center"},[r("div",{staticClass:"mb-4 flex justify-center h-full w-56"},[r("img",{staticClass:"format-img",attrs:{src:t.boxLogin.logoUrl,alt:""}})]),r("div",{staticClass:"relative w-full h-40"},[t.loadingBiometric?r("loader"):t._e()],1)])},s=[],o=r("2f62"),i=r("2ef0"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("ValidationObserver",[r("div",{staticClass:"mb-10 relative"},[r("ValidationProvider",{attrs:{rules:{required:!0,min:4,regex:/^[a-zA-Z0-9_]{1,32}$/}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors,s=e.invalid;return[r("zt-input",{ref:"ztInputUser",staticClass:"zt-input-user",style:[t.loginCustomParamsFields.styles.form.inputs.bgColor],attrs:{outlined:"",name:"user",label:t.loginCustomParamsFields.textLabels.user,color:t.colorOutlineUser(s),"data-vs-input":"auth-login-fields-input-user"},model:{value:t.value.userName,callback:function(e){t.$set(t.value,"userName",e)},expression:"value.userName"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:n[0],expression:"errors[0]"}],staticClass:"text-zt-danger absolute left-0"},[t._v("\n          "+t._s(n[0])+"\n        ")])]}}])})],1),r("div",{staticClass:"mb-4 pb-2 relative"},[r("ValidationProvider",{attrs:{rules:"required|min:4"},scopedSlots:t._u([{key:"default",fn:function(e){e.errors,e.invalid;return[r("zt-input",{ref:"ztInputPass",staticClass:"zt-input-password",style:[t.loginCustomParamsFields.styles.form.inputs.bgColor],attrs:{outlined:"",name:"password",type:"password",label:t.loginCustomParamsFields.textLabels.pass,"data-vs-input":"auth-login-fields-input-pass"},on:{keypress:t.activeButton},model:{value:t.value.userPass,callback:function(e){t.$set(t.value,"userPass",e)},expression:"value.userPass"}})]}}])})],1)])],1)},u=[],c=r("7bb1"),l={name:"ztAuthLoginFields",props:{value:{type:Object,default:function(){return{userName:"",userPass:""}}},loginCustomParamsFields:{type:Object,default:function(){}}},model:{prop:"value",event:"change"},data:function(){return{}},created:function(){Object(c["d"])("es"),Object(c["d"])({es:{messages:{required:this.$t("message.loginComponent.validations.userRules.requireUser"),min:this.$t("message.loginComponent.validations.userRules.minCharacters",{min:"{length}"}),regex:this.$t("message.loginComponent.validations.userRules.charactersValidation")}}})},computed:{colorOutlineUser:function(){var t=this;return function(e){return e?"danger":t.loginCustomParamsFields.styles.form.inputs.outlineColor}}},methods:{activeButton:function(t){13===t.keyCode&&(t.preventDefault(),this.$emit("activeButton"))},validateAutofill:function(){var t=this;setTimeout((function(){var e=document.querySelectorAll(":-webkit-autofill");if(0!==e.length)for(var r=[t.$refs.ztInputUser,t.$refs.ztInputPass],n=document.querySelectorAll(".zt-input-main"),s=0;s<n.length;++s){var o=n[s].querySelectorAll("label")[0];o.classList.add("zt-label-active");var i=n[s].querySelectorAll("legend")[0];i.style.width="".concat(r[s].labelWidth,"px")}}),500)}},mounted:function(){this.validateAutofill()}},h=l,f=r("2877"),d=Object(f["a"])(h,a,u,!1,null,"7b6050e6",null),p=d.exports,m=r("7b72"),g=r("27ff"),v=r("377c"),y=r("22e1"),b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.showButtons?r("div",{staticClass:"flex justify-between h-16 border-t border-zt-dark-200",style:[t.firstLoginCustomParamsFields.styles.commerceInfo.bgColor]},[r("a",{staticClass:"text-zt-dark-300 flex items-center justify-center border-r",style:[t.firstLoginCustomParamsFields.styles.commerceInfo.textColor],attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://community.visma.com/t5/Sabias-que/POLITICA-DE-PRIVACIDAD-DE-LA-PLATAFORMA-VISMA/ta-p/567941"}},[r("p",[t._v(t._s(t.$t("message.loginComponent.login.termsAndConditions")))])]),r("a",{staticClass:"text-zt-dark-300 flex items-center justify-center",style:[t.firstLoginCustomParamsFields.styles.commerceInfo.textColor],on:{click:t.activeModalInfo}},[r("p",[t._v(t._s(t.$t("message.loginComponent.login.help")))])])]):t._e()},w=[],x={name:"ztAuthLoginCommercialHelp",inject:["mutation"],props:{firstLoginCustomParamsFields:{type:Object,default:function(){}}},computed:{showButtons:function(){return"undefined"===typeof this.firstLoginCustomParamsFields.styles.commerceInfo.showButtons||""===this.firstLoginCustomParamsFields.styles.commerceInfo.showButtons||this.firstLoginCustomParamsFields.styles.commerceInfo.showButtons}},methods:{activeModalInfo:function(){this.mutation.setActiveModal(!0)}}},L=x,E=Object(f["a"])(L,b,w,!1,null,"90c6c0f4",null),P=E.exports,S={FIRST_LOGIN:"00015",PASSWORD_EXPIRED:"00607",MFA_EMAIL_VERIFICATION:"00606",MFA_CODE_VERIFICATION:"00600",MFA_USER_BLOCK:""},O=S,C=r("c1df"),k=r.n(C),A=r("f8fe"),_=r("1281"),I=r("ff0f");function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function F(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */F=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,s=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),a=new _(n||[]);return s(i,"_invoke",{value:O(t,r,a)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var w={};c(w,i,(function(){return this}));var x=Object.getPrototypeOf,L=x&&x(x(I([])));L&&L!==r&&n.call(L,i)&&(w=L);var E=b.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(s,o,i,a){var u=h(t[s],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==j(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){c.value=t,i(c)}),(function(t){return r("throw",t,i,a)}))}a(u.arg)}var o;s(this,"_invoke",{value:function(t,n){function s(){return new e((function(e,s){r(t,n,e,s)}))}return o=o?o.then(s,s):s()}})}function O(e,r,n){var s=f;return function(o,i){if(s===p)throw Error("Generator is already running");if(s===m){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=C(a,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===f)throw s=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=p;var c=h(e,r,n);if("normal"===c.type){if(s=n.done?m:d,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(s=m,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,s=e.iterator[n];if(s===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=h(s,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,o=function r(){for(;++s<e.length;)if(n.call(e,s))return r.value=e[s],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(j(e)+" is not iterable")}return y.prototype=b,s(E,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},P(S.prototype),c(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,s,o){void 0===o&&(o=Promise);var i=new S(l(t,r,n,s),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},P(E),c(E,u,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function s(n,s){return a.type="throw",a.arg=e,r.next=n,s&&(r.method="next",r.arg=t),!!s}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return s("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return s(i.catchLoc,!0);if(this.prev<i.finallyLoc)return s(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return s(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return s(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var o=s;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var s=n.arg;A(r)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function R(t,e,r,n,s,o,i){try{var a=t[o](i),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,s)}function M(t){return function(){var e=this,r=arguments;return new Promise((function(n,s){var o=t.apply(e,r);function i(t){R(o,n,s,i,a,"next",t)}function a(t){R(o,n,s,i,a,"throw",t)}i(void 0)}))}}function B(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?B(Object(r),!0).forEach((function(e){$(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $(t,e,r){return(e=T(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T(t){var e=D(t,"string");return"symbol"==j(e)?e:e+""}function D(t,e){if("object"!=j(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var z={name:"ztLogin",components:{ZtAuthLoginCommercialHelp:P,ZtAuthLoginFields:p,Loader:I["a"]},inject:["mutationUser","mutationUserPass"],data:function(){return{objectLoginParams:{},loginFields:{userName:"",userPass:""},isLoadingLogin:!1,isDisabledButton:!1,jwt:"",usersEmployeeRelated:[],userRelatedEmpty:!1,userEmployee:{},loginErrors:{message:"",showMessage:!1,MAX_DURATION_ALERT:4},codePasswordExpired:!1,queryParamsSAML:null,hasIntegrationVismaPeople:!1,loadingBiometric:!1}},mixins:[m["a"]],computed:U(U({},Object(o["c"])({getLoginCustomParams:"auth/getLoginCustomParams",getFactoryStringParam:"auth/getFactoryStringParam"})),{},{bgButtonColor:function(){var t=this;return function(e){return e?{backgroundColor:"#E2E2E2"}:t.boxLogin.styles.form.buttons.bgColor}},showButtonSSO:function(){return"undefined"!==typeof this.boxLogin.styles.form.buttonSSO.showButton&&""!==this.boxLogin.styles.form.buttonSSO.showButton&&this.boxLogin.styles.form.buttonSSO.showButton},hasParamsSAML:function(){var t=this;return function(e){return Object(i["isEqual"])(e,200)&&t.queryParamsSAML.has("SAMLRequest")&&t.queryParamsSAML.has("RelayState")}},notMobileLogin:function(){var t=this.$route.query,e=t.deviceId,r=t.deviceToken;return!e&&!r}}),methods:U(U({},Object(o["b"])({setJWT:"setJwt",setCheckUserEmployee:"setCheckUserEmployee",setUsersRelated:"setUsersRelated",getProfile:"getProfile",getUserRelated:"getUserRelated",getProfileByIdPatchUserRelated:"getProfileByIdPatchUserRelated",setActions:"setActions",setStateNotOnBoarding:"setStateNotOnboarding",setUser:"setUser",setParamLoginFactory:"auth/setParamLoginFactory",setHasIntegrationVismaPeople:"setHasIntegrationVismaPeople",clearState:"clearState",setPayrollStatus:"setPayrollStatus"})),{},{submitLogin:function(){var t=M(F().mark((function t(){var e,r,n,s,o,i;return F().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoadingLogin=!0,this.isDisabledButton=!0,t.prev=2,e=this.loginFields.userName.trim().toLowerCase(),t.next=6,this.auth.login(e,this.loginFields.userPass);case 6:if(r=t.sent,n=r.data,s=n.jwt,o=n.code,i=r.status,this.jwt=s,this.setJWT({jwt:this.jwt}),!this.hasParamsSAML(i)){t.next=16;break}return t.next=13,this.accessSAML();case 13:return t.abrupt("return");case 16:return t.next=18,this.loginSuccess(o);case 18:this.isDisabledButton=!1,t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](2),this.handleErrors(t.t0);case 24:case"end":return t.stop()}}),t,this,[[2,21]])})));function e(){return t.apply(this,arguments)}return e}(),loginSuccess:function(){var t=M(F().mark((function t(e,r){var n,s;return F().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.$route.query.factory,t.next=3,this.getListUserRelated();case 3:if(s=t.sent,!s){t.next=6;break}return t.abrupt("return",this.handleErrors("errAccessRRHH"));case 6:if(!n){t.next=11;break}return t.next=9,this.setUserEmployeeByFactory(n);case 9:t.next=13;break;case 11:return t.next=13,this.setUserEmployee();case 13:if(!(e&&e===O.MFA_EMAIL_VERIFICATION||e&&e===O.MFA_CODE_VERIFICATION)){t.next=15;break}return t.abrupt("return",this.redirectToMFA(e));case 15:if(!e||e!==O.FIRST_LOGIN){t.next=17;break}return t.abrupt("return",this.verifyFirstLogin());case 17:if(this.codePasswordExpired!==O.PASSWORD_EXPIRED){t.next=19;break}return t.abrupt("return",this.verifyPasswordExpired());case 19:if(2!==this.userEmployee.estado_empresa){t.next=21;break}return t.abrupt("return",this.verifyUserOnBoarding());case 21:return t.next=23,this.setPayrollStatus();case 23:return t.next=25,this.authorizedAccess(r);case 25:this.checkActiveVismaPeopleIntegration();case 26:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}(),fieldActiveButton:function(t){t||this.submitLogin()},getListUserRelated:function(){var t=M(F().mark((function t(){var e;return F().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getUserRelated();case 3:if(e=t.sent,this.usersEmployeeRelated=Object(i["filter"])(e,(function(t){return Object(i["find"])(t.perfiles,(function(t){return 1===t.id_perfil_tipo}))})),!Object(i["isEmpty"])(this.usersEmployeeRelated)){t.next=7;break}return t.abrupt("return",!0);case 7:return this.userEmployee=this.findDateLastSessionUser(this.usersEmployeeRelated),t.next=10,this.setCheckUserEmployee(!0);case 10:return t.next=12,this.setUsersRelated({usersRelated:this.usersEmployeeRelated});case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),this.handleErrors(t.t0);case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(){return t.apply(this,arguments)}return e}(),findDateLastSessionUser:function(t){var e=t.filter((function(t){return!t.blockedByPayment})),r=Object(i["find"])(e,(function(t){return Object(i["isEmpty"])(t.ultimasession)})),n=new Date(Math.max.apply(null,Object(i["map"])(e,(function(t){return Object(i["isEmpty"])(t.ultimasession)?"":new Date(k()(t.ultimasession,"DD-MM-YYYY hh:mm:ss").format())})))),s=Object(i["filter"])(e,(function(t){return new Date(k()(t.ultimasession,"DD-MM-YYYY hh:mm:ss").format()).getTime()===n.getTime()}))[0];return r||s},setUserEmployee:function(){var t=M(F().mark((function t(){var e,r;return F().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getProfileByIdPatchUserRelated(this.userEmployee.id);case 3:e=t.sent,r=e.data.code,this.codePasswordExpired=r,this.setUser({user:this.userEmployee}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.handleErrors(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),verifyFirstLogin:function(){this.$router.push({name:"firstLogin"})},verifyPasswordExpired:function(){this.mutationUserPass.setPExpired(this.loginFields.userPass),this.$router.push({name:"passwordExpired"})},verifyUserOnBoarding:function(){localStorage.setItem("jwt",this.$store.getters.getJwt),location.replace(window.location.origin+"/s/home/"+this.$store.getters.getUser.id),this.$store.dispatch("clearState")},authorizedAccess:function(){var t=M(F().mark((function t(e){var r,n,s;return F().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.setActions();case 3:return t.next=5,this.setStateNotOnBoarding(!0);case 5:if(r=this.$route.query.so,!(r&&["androidOS","iOS"].includes(r)||e)){t.next=13;break}return t.next=9,this.$router.push({name:"mobileLoginSuccess"});case 9:return this.isLoadingLogin=!1,t.abrupt("return");case 13:return n=this.$store.state.user.perfiles.some((function(t){return 8===t.id_perfil_tipo})),s=n?"/dashboard":"/",t.next=17,this.$router.push(s);case 17:this.isLoadingLogin=!1,t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](0),this.handleErrors(t.t0);case 23:case"end":return t.stop()}}),t,this,[[0,20]])})));function e(e){return t.apply(this,arguments)}return e}(),handleErrors:function(t){try{if(t.hasOwnProperty("response")&&"00018"===t.response.data.code)return this.setStateNotOnBoarding(!0),this.mutationUser.setUBlock(this.loginFields.userName),this.mutationUser.setPBlock(this.loginFields.userPass),void this.$router.push({name:"userBlock"});this.isLoadingLogin=!1,this.isDisabledButton=!1,this.loginErrors.showMessage=!0,this.loginErrors.message="string"===typeof t?this.$t("message.errorReference.".concat(t)):this.$t("message.errorReference.".concat(t.response.data.code)),this.$store.dispatch("clearState")}catch(e){this.loginErrors.showMessage=!0,this.loginErrors.message=this.$t("message.errorReference.00003"),this.isLoadingLogin=!1,this.isDisabledButton=!1,this.$store.dispatch("clearState")}},gotoSSO:function(){var t=location.origin;location.replace(t+"/sso")},accessSAML:function(){this.$router.push({name:"authSAML",params:{queryParamsSAML:this.queryParamsSAML}})},redirectToMFA:function(t){var e=this,r=this.$store.getters.getUser.mail;t===O.MFA_EMAIL_VERIFICATION&&this.$router.push({name:"mfaEmailVerification",params:{email:r,password:this.loginFields.userPass}}),t===O.MFA_CODE_VERIFICATION&&this.MFA.getResendStatus().then((function(){e.$router.push({name:"mfaUserBlock"})})).catch((function(){e.$router.push({name:"mfaCodeVerification",params:{email:r}})}))},setUserEmployeeByFactory:function(){var t=M(F().mark((function t(e){var r,n;return F().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.setParamLoginFactory(e),this.userEmployee=Object(i["find"])(this.usersEmployeeRelated,(function(t){return t.empresa.id===parseInt(e,10)})),t.next=5,this.getProfileByIdPatchUserRelated(this.userEmployee.id);case 5:r=t.sent,n=r.data.code,this.codePasswordExpired=n,this.setUser({user:this.userEmployee}),t.next=16;break;case 11:return t.prev=11,t.t0=t["catch"](0),this.handleErrors(t.t0),t.next=16,this.$router.push({name:"login"});case 16:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e){return t.apply(this,arguments)}return e}(),checkActiveVismaPeopleIntegration:function(){var t=this,e="VP_ABSENCES_HOLIDAYS";this.vi.checkIntegrationVismaPeople(e).then((function(e){t.hasIntegrationVismaPeople=e.data.data.enabled,t.setHasIntegrationVismaPeople(t.hasIntegrationVismaPeople)}))},onRequestSuccess:function(){var t=M(F().mark((function t(e){var r,n,s;return F().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.DeviceToken,n=e.jwt,s=e.status,localStorage.setItem("deviceToken",r),localStorage.setItem("jwt",n),this.setJWT({jwt:n}),!this.hasParamsSAML(s)){t.next=9;break}return t.next=7,this.accessSAML();case 7:t.next=11;break;case 9:return t.next=11,this.loginSuccess(null,!0);case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onResponseError:function(t){var e=!Object(i["isEmpty"])(t.response.data)&&"codes"in t.response.data?t.response.data.codes[0].code:t.response.status;localStorage.removeItem("deviceToken"),localStorage.removeItem("jwt"),this.setJWT({jwt:""}),this.clearState(),this.$router.push({name:"login",query:{authfailed:e}})}}),mounted:function(){this.queryParamsSAML=new A["a"](window.location.search)},created:function(){var t=M(F().mark((function t(){var e,r,n,s,o,i;return F().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.auth=new g["a"],this.user=new v["a"],this.MFA=new y["a"],this.objectLoginParams=this.getLoginCustomParams.loginCustom,this.vi=new _["a"],e=this.$route.query,r=e.deviceId,n=e.deviceToken,!r||!n){t.next=20;break}return this.loadingBiometric=!0,t.prev=8,t.next=11,this.auth.biometricLogin({deviceId:r,deviceToken:n,status:i});case 11:s=t.sent,o=s.data.data,i=s.status,this.onRequestSuccess(o),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](8),this.onResponseError(t.t0);case 20:case"end":return t.stop()}}),t,this,[[8,17]])})));function e(){return t.apply(this,arguments)}return e}()},N=z,V=(r("1e30"),Object(f["a"])(N,n,s,!1,null,"e3aefaa0",null));e["default"]=V.exports}}]);